{"ast":null,"code":"import _objectSpread from\"C:\\\\Users\\\\PC\\\\Desktop\\\\frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import React,{useEffect}from\"react\";import{useDispatch,useSelector}from\"react-redux\";import{Link}from\"react-router-dom\";import{createOrder}from\"../actions/orderActions\";import CheckoutSteps from\"../components/CheckoutSteps\";import{ORDER_CREATE_RESET}from\"../constants/orderConstants\";import LoadingBox from\"../components/LoadingBox\";import MessageBox from\"../components/MessageBox\";export default function PlaceOrderScreen(props){var cart=useSelector(function(state){return state.cart;});if(!cart.paymentMethod){props.history.push(\"/payment\");}var orderCreate=useSelector(function(state){return state.orderCreate;});var loading=orderCreate.loading,success=orderCreate.success,error=orderCreate.error,order=orderCreate.order;var toPrice=function toPrice(num){return Number(num.toFixed(2));};// 5.123 => \"5.12\" => 5.12\ncart.itemsPrice=toPrice(cart.cartItems.reduce(function(a,c){return a+c.qty*c.price;},0));cart.shippingPrice=cart.itemsPrice>100?toPrice(0):toPrice(10);cart.taxPrice=toPrice(0.0*cart.itemsPrice);cart.totalPrice=cart.itemsPrice+cart.shippingPrice;var dispatch=useDispatch();var placeOrderHandler=function placeOrderHandler(){dispatch(createOrder(_objectSpread(_objectSpread({},cart),{},{orderItems:cart.cartItems})));};useEffect(function(){if(success){props.history.push(\"/order/\".concat(order._id));dispatch({type:ORDER_CREATE_RESET});}},[dispatch,order,props.history,success]);return/*#__PURE__*/React.createElement(\"div\",{className:\"w-[80%] m-[auto] mt-[50px]\"},/*#__PURE__*/React.createElement(CheckoutSteps,{step1:true,step2:true,step3:true,step4:true}),/*#__PURE__*/React.createElement(\"div\",{className:\"placeorder\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-2\"},/*#__PURE__*/React.createElement(\"ul\",null,/*#__PURE__*/React.createElement(\"li\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"card card-body\"},/*#__PURE__*/React.createElement(\"h2\",null,\"\\xC7atd\\u0131r\\u0131lma\"),/*#__PURE__*/React.createElement(\"p\",null,/*#__PURE__*/React.createElement(\"strong\",null,\"Ad:\"),\" \",cart.shippingAddress.fullName,\" \",/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"strong\",null,\"\\xDCnvan: \"),\" \",cart.shippingAddress.address,\",\",cart.shippingAddress.city,\", \",cart.shippingAddress.postalCode,\",\",cart.shippingAddress.country))),/*#__PURE__*/React.createElement(\"li\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"card card-body\"},/*#__PURE__*/React.createElement(\"h2\",null,\"\\xD6d\\u0259ni\\u015F\"),/*#__PURE__*/React.createElement(\"p\",null,/*#__PURE__*/React.createElement(\"strong\",null,\"Metod:\"),\" Bank kart\\u0131 il\\u0259\"))),/*#__PURE__*/React.createElement(\"li\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"card card-body\"},/*#__PURE__*/React.createElement(\"h2\",null,\"Sifari\\u015F olunan m\\u0259hsullar\"),/*#__PURE__*/React.createElement(\"ul\",null,cart.cartItems.map(function(item){return/*#__PURE__*/React.createElement(\"li\",{key:item.product},/*#__PURE__*/React.createElement(\"div\",{className:\"placeorder\"},/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"img\",{src:item.image,alt:item.name,className:\"small\"})),/*#__PURE__*/React.createElement(\"div\",{className:\"min-30\"},/*#__PURE__*/React.createElement(Link,{to:\"/product/\".concat(item.product)},item.name)),/*#__PURE__*/React.createElement(\"div\",null,item.size),/*#__PURE__*/React.createElement(\"div\",null,item.color),/*#__PURE__*/React.createElement(\"div\",null,item.qty,\" x $\",item.price,\" = $\",item.qty*item.price)));})))))),/*#__PURE__*/React.createElement(\"div\",{className:\"col-1\"},/*#__PURE__*/React.createElement(\"div\",{className:\"card card-body\"},/*#__PURE__*/React.createElement(\"ul\",null,/*#__PURE__*/React.createElement(\"li\",null,/*#__PURE__*/React.createElement(\"h2\",null,\"Sifari\\u015F \\xF6z\\u0259ti\")),/*#__PURE__*/React.createElement(\"li\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"placeorder\"},/*#__PURE__*/React.createElement(\"div\",null,\"M\\u0259hsullar\"),/*#__PURE__*/React.createElement(\"div\",null,cart.itemsPrice.toFixed(2),\" Azn\"))),/*#__PURE__*/React.createElement(\"li\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"placeorder\"},/*#__PURE__*/React.createElement(\"div\",null,\"\\xC7atd\\u0131r\\u0131lma\"),/*#__PURE__*/React.createElement(\"div\",null,cart.shippingPrice.toFixed(2),\" Azn\"))),/*#__PURE__*/React.createElement(\"li\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"placeorder\"},/*#__PURE__*/React.createElement(\"div\",null,\"Endirim\"),/*#__PURE__*/React.createElement(\"div\",null,cart.taxPrice.toFixed(2),\" Azn\"))),/*#__PURE__*/React.createElement(\"li\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"placeorder\"},/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"strong\",null,\"\\xDCmumi qiym\\u0259t\")),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"strong\",null,cart.totalPrice.toFixed(2),\" Azn\")))),/*#__PURE__*/React.createElement(\"li\",null,/*#__PURE__*/React.createElement(\"button\",{type:\"button\",onClick:placeOrderHandler,className:\"greenbtn block\",disabled:cart.cartItems.length===0},\"\\xD6D\\u018F\")),loading&&/*#__PURE__*/React.createElement(LoadingBox,null),error&&/*#__PURE__*/React.createElement(MessageBox,{variant:\"danger\"},error))))));}","map":{"version":3,"sources":["C:/Users/PC/Desktop/frontend/src/screens/PlaceOrderScreen.js"],"names":["React","useEffect","useDispatch","useSelector","Link","createOrder","CheckoutSteps","ORDER_CREATE_RESET","LoadingBox","MessageBox","PlaceOrderScreen","props","cart","state","paymentMethod","history","push","orderCreate","loading","success","error","order","toPrice","num","Number","toFixed","itemsPrice","cartItems","reduce","a","c","qty","price","shippingPrice","taxPrice","totalPrice","dispatch","placeOrderHandler","orderItems","_id","type","shippingAddress","fullName","address","city","postalCode","country","map","item","product","image","name","size","color","length"],"mappings":"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","sourcesContent":["import React, { useEffect } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { Link } from \"react-router-dom\";\nimport { createOrder } from \"../actions/orderActions\";\nimport CheckoutSteps from \"../components/CheckoutSteps\";\nimport { ORDER_CREATE_RESET } from \"../constants/orderConstants\";\nimport LoadingBox from \"../components/LoadingBox\";\nimport MessageBox from \"../components/MessageBox\";\n\nexport default function PlaceOrderScreen(props) {\n  const cart = useSelector((state) => state.cart);\n  if (!cart.paymentMethod) {\n    props.history.push(\"/payment\");\n  }\n  const orderCreate = useSelector((state) => state.orderCreate);\n  const { loading, success, error, order } = orderCreate;\n  const toPrice = (num) => Number(num.toFixed(2)); // 5.123 => \"5.12\" => 5.12\n  cart.itemsPrice = toPrice(\n    cart.cartItems.reduce((a, c) => a + c.qty * c.price, 0)\n  );\n  cart.shippingPrice = cart.itemsPrice > 100 ? toPrice(0) : toPrice(10);\n  cart.taxPrice = toPrice(0.0 * cart.itemsPrice);\n  cart.totalPrice = cart.itemsPrice + cart.shippingPrice;\n  const dispatch = useDispatch();\n  const placeOrderHandler = () => {\n    dispatch(createOrder({ ...cart, orderItems: cart.cartItems }));\n  };\n  useEffect(() => {\n    if (success) {\n      props.history.push(`/order/${order._id}`);\n      dispatch({ type: ORDER_CREATE_RESET });\n    }\n  }, [dispatch, order, props.history, success]);\n\n  return (\n    <div className=\"w-[80%] m-[auto] mt-[50px]\">\n      <CheckoutSteps step1 step2 step3 step4></CheckoutSteps>\n      <div className=\"placeorder\">\n        <div className=\"col-2\">\n          <ul>\n            <li>\n              <div className=\"card card-body\">\n                <h2>Çatdırılma</h2>\n                <p>\n                  <strong>Ad:</strong> {cart.shippingAddress.fullName} <br />\n                  <strong>Ünvan: </strong> {cart.shippingAddress.address},\n                  {cart.shippingAddress.city}, {cart.shippingAddress.postalCode}\n                  ,{cart.shippingAddress.country}\n                </p>\n              </div>\n            </li>\n            <li>\n              <div className=\"card card-body\">\n                <h2>Ödəniş</h2>\n                <p>\n                  <strong>Metod:</strong> Bank kartı ilə\n                </p>\n              </div>\n            </li>\n            <li>\n              <div className=\"card card-body\">\n                <h2>Sifariş olunan məhsullar</h2>\n                <ul>\n                  {cart.cartItems.map((item) => (\n                    <li key={item.product}>\n                      <div className=\"placeorder\">\n                        <div>\n                          <img\n                            src={item.image}\n                            alt={item.name}\n                            className=\"small\"\n                          ></img>\n                        </div>\n                        <div className=\"min-30\">\n                          <Link to={`/product/${item.product}`}>\n                            {item.name}\n                          </Link>\n                        </div>\n                        <div>{item.size}</div>\n                        <div>{item.color}</div>\n                        <div>\n                          {item.qty} x ${item.price} = ${item.qty * item.price}\n                        </div>\n                      </div>\n                    </li>\n                  ))}\n                </ul>\n              </div>\n            </li>\n          </ul>\n        </div>\n        <div className=\"col-1\">\n          <div className=\"card card-body\">\n            <ul>\n              <li>\n                <h2>Sifariş özəti</h2>\n              </li>\n              <li>\n                <div className=\"placeorder\">\n                  <div>Məhsullar</div>\n                  <div>{cart.itemsPrice.toFixed(2)} Azn</div>\n                </div>\n              </li>\n              <li>\n                <div className=\"placeorder\">\n                  <div>Çatdırılma</div>\n                  <div>{cart.shippingPrice.toFixed(2)} Azn</div>\n                </div>\n              </li>\n              <li>\n                <div className=\"placeorder\">\n                  <div>Endirim</div>\n                  <div>{cart.taxPrice.toFixed(2)} Azn</div>\n                </div>\n              </li>\n              <li>\n                <div className=\"placeorder\">\n                  <div>\n                    <strong>Ümumi qiymət</strong>\n                  </div>\n                  <div>\n                    <strong>{cart.totalPrice.toFixed(2)} Azn</strong>\n                  </div>\n                </div>\n              </li>\n              <li>\n                <button\n                  type=\"button\"\n                  onClick={placeOrderHandler}\n                  className=\"greenbtn block\"\n                  disabled={cart.cartItems.length === 0}\n                >\n                  ÖDƏ\n                </button>\n              </li>\n              {loading && <LoadingBox></LoadingBox>}\n              {error && <MessageBox variant=\"danger\">{error}</MessageBox>}\n            </ul>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}