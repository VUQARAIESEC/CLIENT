{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\PC\\\\Desktop\\\\frontend\\\\src\\\\screens\\\\CartScreen.js\";\nimport React, { useState, useEffect } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { saveShippingAddress } from \"../actions/cartActions\";\nimport CheckoutSteps from \"../components/CheckoutSteps\";\nimport Select from \"react-select\";\nimport { Link } from \"react-router-dom\";\nimport data from '../data.json';\nimport { addToCart, removeFromCart } from \"../actions/cartActions\";\nimport MessageBox from \"../components/MessageBox\";\nimport { AiFillDelete } from \"react-icons/ai\";\nimport { AiFillCloseCircle } from \"react-icons/ai\";\nexport default function CartScreen(props) {\n  const productId = props.match.params.id;\n  const qty = props.location.search ? Number(props.location.search.split(\"=\")[1]) : 1;\n  const size = props.location.search ? props.location.search.split(\"=\")[3] : 1;\n  const color = props.location.search ? props.location.search.split(\"=\")[5] : 1;\n  const cart = useSelector(state => state.cart);\n  const {\n    cartItems,\n    error\n  } = cart;\n  const dispatch = useDispatch();\n  useEffect(() => {\n    if (productId) {\n      dispatch(addToCart(productId, qty, size, color));\n    }\n  }, [dispatch, productId, qty, size, color]);\n\n  const removeFromCartHandler = id => {\n    // delete action\n    dispatch(removeFromCart(id));\n  };\n\n  const checkoutHandler = () => {\n    props.history.push(\"/signin?redirect=shipping\");\n  };\n\n  const userSignin = useSelector(state => state.userSignin);\n  const {\n    userInfo\n  } = userSignin;\n  const {\n    shippingAddress\n  } = cart;\n  const [lat, setLat] = useState(shippingAddress.lat);\n  const [lng, setLng] = useState(shippingAddress.lng);\n  const userAddressMap = useSelector(state => state.userAddressMap);\n  const {\n    address: addressMap\n  } = userAddressMap;\n\n  if (!userInfo) {\n    props.history.push(\"/signin\");\n  }\n\n  const [fullName, setFullName] = useState(shippingAddress.fullName);\n  const [phonenumber, setPhoneNumber] = useState(shippingAddress.phoneNumber);\n  const [address, setAddress] = useState(shippingAddress.address);\n  const [city, setCity] = useState(shippingAddress.city);\n  const [region, setRegion] = useState(shippingAddress.city);\n  const [postalCode, setPostalCode] = useState(shippingAddress.postalCode);\n  const [country, setCountry] = useState(shippingAddress.country);\n\n  const submitHandler = e => {\n    e.preventDefault();\n    let moveOn = true;\n\n    if (moveOn) {\n      dispatch(saveShippingAddress({\n        fullName,\n        address,\n        city,\n        region,\n        postalCode,\n        country\n      }));\n      props.history.push(\"/placeorder\");\n    }\n  };\n\n  console.log(cartItems.reduce((a, c) => a + c.qty, 0)); // generate the link when both dropdowns are selected\n  // useEffect(() => {\n  //   if (country && lang) {\n  //     setLink(`https://www.${country.url}/search?q=Clue+Mediator&gl=${country.country_code}&hl=${lang.code}`);\n  //   }\n  // }, [country, lang]);\n\n  const [openmenu, setOpenMenu] = useState(false);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"rowcart\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    className: \"font-bold\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 9\n    }\n  }, \"S\\u0259b\\u0259tiniz\"), error && /*#__PURE__*/React.createElement(MessageBox, {\n    variant: \"danger\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 19\n    }\n  }, error), cartItems.length === 0 ? /*#__PURE__*/React.createElement(MessageBox, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 11\n    }\n  }, \"S\\u0259b\\u0259tiniz bo\\u015Fdur. \", /*#__PURE__*/React.createElement(Link, {\n    to: \"/\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 31\n    }\n  }, \"Al\\u0131\\u015F-veri\\u015F\\u0259 ba\\u015Fla\")) : /*#__PURE__*/React.createElement(\"ul\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 11\n    }\n  }, cartItems.map(item => /*#__PURE__*/React.createElement(\"li\", {\n    key: item.product,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"rowcarting\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    src: item.image,\n    alt: item.name,\n    className: \"small\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 21\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(Link, {\n    to: `/product/${item.product}`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 21\n    }\n  }, item.name)), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 19\n    }\n  }, size), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 19\n    }\n  }, color), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"select\", {\n    className: \"p-[0px]\",\n    value: item.qty,\n    onChange: e => dispatch(addToCart(item.product, Number(e.target.value))),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 21\n    }\n  }, [...Array(item.countInStock).keys()].map(x => /*#__PURE__*/React.createElement(\"option\", {\n    key: x + 1,\n    value: x + 1,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 136,\n      columnNumber: 25\n    }\n  }, x + 1)))), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 19\n    }\n  }, item.price, \"Azn\"), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 143,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    type: \"button\",\n    onClick: () => removeFromCartHandler(item.product),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 144,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(AiFillDelete, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 148,\n      columnNumber: 23\n    }\n  })))))))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"ordersection\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 157,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"w-[100%] p-[10px]\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 158,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"ul\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 159,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"li\", {\n    className: \"font-bold text-[25px]\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 160,\n      columnNumber: 13\n    }\n  }, \"Sifari\\u015Fin \\xF6z\\u0259ti\"), /*#__PURE__*/React.createElement(\"li\", {\n    className: \"flex  justify-between\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 161,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"font-bold\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 162,\n      columnNumber: 15\n    }\n  }, \"M\\u0259hsullar\"), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 163,\n      columnNumber: 15\n    }\n  }, \"(\", cartItems.reduce((a, c) => a + c.qty, 0), \" m\\u0259hsul) :\", cartItems.reduce((a, c) => a + c.price * c.qty, 0), \" Azn\")), /*#__PURE__*/React.createElement(\"li\", {\n    className: \"flex  justify-between\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 168,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"font-bold\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 169,\n      columnNumber: 15\n    }\n  }, \"Endirim\"), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 170,\n      columnNumber: 15\n    }\n  }, \"0 Azn\")), /*#__PURE__*/React.createElement(\"hr\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 172,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(\"li\", {\n    className: \"flex  justify-between\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 173,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"font-bold\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 174,\n      columnNumber: 15\n    }\n  }, \"\\xDCmumi Qiym\\u0259t\"), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 175,\n      columnNumber: 15\n    }\n  }, cartItems.reduce((a, c) => a + c.qty, 0) > 5 ? cartItems.reduce((a, c) => a + c.price * c.qty, 0) + 10 : cartItems.reduce((a, c) => a + c.price * c.qty, 0), \" Azn Azn\")), /*#__PURE__*/React.createElement(\"li\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 179,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    type: \"button\",\n    onClick: () => setOpenMenu(true),\n    className: \" w-[100%] bg-[#08AD76] text-[white] \",\n    disabled: cartItems.length === 0,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 180,\n      columnNumber: 15\n    }\n  }, \"Sifari\\u015Fi tamamla\"), /*#__PURE__*/React.createElement(\"h3\", {\n    className: \"text-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 188,\n      columnNumber: 15\n    }\n  }, \"V\\u0259 ya\"), /*#__PURE__*/React.createElement(Link, {\n    to: \"/\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 189,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    type: \"button\",\n    className: \"w-[100%] bg-[white] border-solid border-2 border-[black]\",\n    disabled: cartItems.length === 0,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 190,\n      columnNumber: 17\n    }\n  }, \"Al\\u0131\\u015F-veri\\u015F\\u0259 davam et\")))))), /*#__PURE__*/React.createElement(\"div\", {\n    className: openmenu ? \"shippingadress open\" : \"shippingadress\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 203,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(CheckoutSteps, {\n    step1: true,\n    step2: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 204,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(\"form\", {\n    className: \"formshipping\",\n    onSubmit: submitHandler,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 207,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"text-center font-bold text-[20px]\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 208,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    className: \"mt-[15px]\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 209,\n      columnNumber: 13\n    }\n  }, \"Shipping Address\")), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"shippingdiv\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 214,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"fullName\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 215,\n      columnNumber: 13\n    }\n  }, \"Ad Soyad\"), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    id: \"fullName\",\n    placeholder: \"Enter full name\",\n    value: fullName,\n    onChange: e => setFullName(e.target.value),\n    required: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 216,\n      columnNumber: 13\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"shippingdiv\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 226,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"phonenumber\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 227,\n      columnNumber: 13\n    }\n  }, \"Telefon n\\xF6mr\\u0259si\"), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"tel\",\n    id: \"phonenumber\",\n    placeholder: \"Enter Phone Number\",\n    value: phonenumber,\n    onChange: e => setPhoneNumber(e.target.value),\n    required: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 228,\n      columnNumber: 13\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"shippingdiv\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 238,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"city\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 239,\n      columnNumber: 15\n    }\n  }, \"\\u015E\\u0259h\\u0259r\"), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    id: \"city\",\n    placeholder: \"Enter city\",\n    value: city,\n    onChange: e => setCity(e.target.value),\n    required: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 240,\n      columnNumber: 15\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"shippingdiv\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 251,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"region\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 252,\n      columnNumber: 15\n    }\n  }, \"Rayon\"), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    id: \"region\",\n    placeholder: \"Rayonu se\\xE7in\",\n    value: region,\n    onChange: e => setRegion(e.target.value),\n    required: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 253,\n      columnNumber: 15\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"shippingdiv\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 263,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"postalCode\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 264,\n      columnNumber: 15\n    }\n  }, \"Postal Kod\"), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    id: \"postalCode\",\n    placeholder: \"Enter postal code\",\n    value: postalCode,\n    onChange: e => setPostalCode(e.target.value),\n    required: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 265,\n      columnNumber: 15\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"shippingdiv\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 276,\n      columnNumber: 12\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"country\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 277,\n      columnNumber: 13\n    }\n  }, \"Country\"), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    id: \"country\",\n    placeholder: \"Enter country\",\n    value: country,\n    onChange: e => setCountry(e.target.value),\n    required: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 278,\n      columnNumber: 13\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"shippingdiv\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 291,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"address\",\n    className: \"ml-[20px]\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 292,\n      columnNumber: 13\n    }\n  }, \"Tam Address\"), /*#__PURE__*/React.createElement(\"textarea\", {\n    type: \"text\",\n    id: \"address\",\n    placeholder: \"Enter address\",\n    value: address,\n    onChange: e => setAddress(e.target.value),\n    required: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 293,\n      columnNumber: 13\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"shippingdiv\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 303,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 304,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(\"button\", {\n    className: \"w-[100%] greenbtn\",\n    type: \"submit\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 305,\n      columnNumber: 13\n    }\n  }, \"Davam Et\"))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"closeshipping\",\n    onClick: () => setOpenMenu(false),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 313,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(AiFillCloseCircle, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 314,\n      columnNumber: 11\n    }\n  }))));\n}","map":{"version":3,"sources":["C:/Users/PC/Desktop/frontend/src/screens/CartScreen.js"],"names":["React","useState","useEffect","useDispatch","useSelector","saveShippingAddress","CheckoutSteps","Select","Link","data","addToCart","removeFromCart","MessageBox","AiFillDelete","AiFillCloseCircle","CartScreen","props","productId","match","params","id","qty","location","search","Number","split","size","color","cart","state","cartItems","error","dispatch","removeFromCartHandler","checkoutHandler","history","push","userSignin","userInfo","shippingAddress","lat","setLat","lng","setLng","userAddressMap","address","addressMap","fullName","setFullName","phonenumber","setPhoneNumber","phoneNumber","setAddress","city","setCity","region","setRegion","postalCode","setPostalCode","country","setCountry","submitHandler","e","preventDefault","moveOn","console","log","reduce","a","c","openmenu","setOpenMenu","length","map","item","product","image","name","target","value","Array","countInStock","keys","x","price"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { saveShippingAddress } from \"../actions/cartActions\";\nimport CheckoutSteps from \"../components/CheckoutSteps\";\nimport Select from \"react-select\";\nimport { Link } from \"react-router-dom\";\nimport data from '../data.json';\nimport { addToCart, removeFromCart } from \"../actions/cartActions\";\nimport MessageBox from \"../components/MessageBox\";\nimport { AiFillDelete } from \"react-icons/ai\";\nimport { AiFillCloseCircle } from \"react-icons/ai\";\n\n\nexport default function CartScreen(props) {\n  const productId = props.match.params.id;\n  const qty = props.location.search\n    ? Number(props.location.search.split(\"=\")[1])\n    : 1;\n\n  const size = props.location.search ? props.location.search.split(\"=\")[3] : 1;\n  const color = props.location.search ? props.location.search.split(\"=\")[5] : 1;\n\n  const cart = useSelector((state) => state.cart);\n  const { cartItems, error } = cart;\n  const dispatch = useDispatch();\n  useEffect(() => {\n    if (productId) {\n      dispatch(addToCart(productId, qty, size, color));\n    }\n  }, [dispatch, productId, qty, size, color]);\n\n  const removeFromCartHandler = (id) => {\n    // delete action\n    dispatch(removeFromCart(id));\n  };\n\n  const checkoutHandler = () => {\n    props.history.push(\"/signin?redirect=shipping\");\n  };\n\n  const userSignin = useSelector((state) => state.userSignin);\n\n  const { userInfo } = userSignin;\n  const { shippingAddress } = cart;\n  const [lat, setLat] = useState(shippingAddress.lat);\n  const [lng, setLng] = useState(shippingAddress.lng);\n  const userAddressMap = useSelector((state) => state.userAddressMap);\n  const { address: addressMap } = userAddressMap;\n\n  if (!userInfo) {\n    props.history.push(\"/signin\");\n  }\n  const [fullName, setFullName] = useState(shippingAddress.fullName);\n  const [phonenumber,setPhoneNumber] = useState(shippingAddress.phoneNumber);\n  const [address, setAddress] = useState(shippingAddress.address);\n  const [city, setCity] = useState(shippingAddress.city);\n  const [region, setRegion] = useState(shippingAddress.city);\n  const [postalCode, setPostalCode] = useState(shippingAddress.postalCode);\n  const [country, setCountry] = useState(shippingAddress.country);\n  \n\n\n  const submitHandler = (e) => {\n    e.preventDefault();\n \n    let moveOn = true;\n\n    if (moveOn) {\n      dispatch(\n        saveShippingAddress({\n          fullName,\n          address,\n          city,\n          region,\n          postalCode,\n          country,\n          \n        })\n      );\n      props.history.push(\"/placeorder\");\n    }\n  };\n\n\nconsole.log(cartItems.reduce((a, c) => a + c.qty, 0));\n\n  \n\n  // generate the link when both dropdowns are selected\n  // useEffect(() => {\n  //   if (country && lang) {\n  //     setLink(`https://www.${country.url}/search?q=Clue+Mediator&gl=${country.country_code}&hl=${lang.code}`);\n  //   }\n  // }, [country, lang]);\n\n\n  const [openmenu, setOpenMenu] = useState(false);\n  return (\n    <div className=\"rowcart\">\n      <div className=\"col-2\">\n        <h1 className=\"font-bold\">Səbətiniz</h1>\n        {error && <MessageBox variant=\"danger\">{error}</MessageBox>}\n        {cartItems.length === 0 ? (\n          <MessageBox>\n            Səbətiniz boşdur. <Link to=\"/\">Alış-verişə başla</Link>\n          </MessageBox>\n        ) : (\n          <ul>\n            {cartItems.map((item) => (\n              <li key={item.product}>\n                <div className=\"rowcarting\">\n                  <div>\n                    <img\n                      src={item.image}\n                      alt={item.name}\n                      className=\"small\"\n                    ></img>\n                  </div>\n                  <div>\n                    <Link to={`/product/${item.product}`}>{item.name}</Link>\n                  </div>\n\n                  <div className=\"\">{size}</div>\n                  <div className=\"\">{color}</div>\n                  <div>\n                    <select\n                      className=\"p-[0px]\"\n                      value={item.qty}\n                      onChange={(e) =>\n                        dispatch(\n                          addToCart(item.product, Number(e.target.value))\n                        )\n                      }\n                    >\n                      {[...Array(item.countInStock).keys()].map((x) => (\n                        <option key={x + 1} value={x + 1}>\n                          {x + 1}\n                        </option>\n                      ))}\n                    </select>\n                  </div>\n                  <div>{item.price}Azn</div>\n                  <div>\n                    <button\n                      type=\"button\"\n                      onClick={() => removeFromCartHandler(item.product)}\n                    >\n                      <AiFillDelete />\n                    </button>\n                  </div>\n                </div>\n              </li>\n            ))}\n          </ul>\n        )}\n      </div>\n      <div className=\"ordersection\">\n        <div className=\"w-[100%] p-[10px]\">\n          <ul>\n            <li className=\"font-bold text-[25px]\">Sifarişin özəti</li>\n            <li className=\"flex  justify-between\">\n              <div className=\"font-bold\">Məhsullar</div>\n              <div>\n                ({cartItems.reduce((a, c) => a + c.qty, 0)} məhsul) : \n                {cartItems.reduce((a, c) => a + c.price * c.qty, 0)} Azn\n              </div>\n            </li>\n            <li className=\"flex  justify-between\">\n              <div className=\"font-bold\">Endirim</div>\n              <div>0 Azn</div>\n            </li>\n            <hr />\n            <li className=\"flex  justify-between\">\n              <div className=\"font-bold\">Ümumi Qiymət</div>\n              <div>\n                {cartItems.reduce((a, c) => a + c.qty, 0) > 5 ? cartItems.reduce((a, c) => a + c.price * c.qty, 0) + 10 : cartItems.reduce((a, c) => a + c.price * c.qty, 0)} Azn\n                 Azn</div>\n            </li>\n            <li>\n              <button\n                type=\"button\"\n                onClick={() => setOpenMenu(true)}\n                className=\" w-[100%] bg-[#08AD76] text-[white] \"\n                disabled={cartItems.length === 0}\n              >\n                Sifarişi tamamla\n              </button>\n              <h3 className=\"text-center\">Və ya</h3>\n              <Link to=\"/\">\n                <button\n                  type=\"button\"\n                  className=\"w-[100%] bg-[white] border-solid border-2 border-[black]\"\n                  disabled={cartItems.length === 0}\n                >\n                 Alış-verişə davam et\n                </button>\n              </Link>\n            </li>\n          </ul>\n        </div>\n      </div>\n\n      <div className={openmenu ? \"shippingadress open\" : \"shippingadress\"}>\n        <CheckoutSteps step1 step2></CheckoutSteps>\n\n\n        <form className=\"formshipping\" onSubmit={submitHandler}>\n          <div className=\"text-center font-bold text-[20px]\">\n            <h1 className=\"mt-[15px]\">Shipping Address</h1>\n          </div>\n\n     \n\n          <div className=\"shippingdiv\">\n            <label htmlFor=\"fullName\">Ad Soyad</label>\n            <input\n              type=\"text\"\n              id=\"fullName\"\n              placeholder=\"Enter full name\"\n              value={fullName}\n              onChange={(e) => setFullName(e.target.value)}\n              required\n            ></input>\n          </div>\n\n          <div className=\"shippingdiv\">\n            <label htmlFor=\"phonenumber\">Telefon nömrəsi</label>\n            <input\n              type=\"tel\"\n              id=\"phonenumber\"\n              placeholder=\"Enter Phone Number\"\n              value={phonenumber}\n              onChange={(e) => setPhoneNumber(e.target.value)}\n              required\n            ></input>\n          </div>  \n\n          <div className=\"shippingdiv\">\n              <label htmlFor=\"city\">Şəhər</label>\n              <input\n                type=\"text\"\n                id=\"city\"\n                placeholder=\"Enter city\"\n                value={city}\n                onChange={(e) => setCity(e.target.value)}\n                required\n              ></input>\n            </div>\n\n\n            <div className=\"shippingdiv\">\n              <label htmlFor=\"region\">Rayon</label>\n              <input\n                type=\"text\"\n                id=\"region\"\n                placeholder=\"Rayonu seçin\"\n                value={region}\n                onChange={(e) => setRegion(e.target.value)}\n                required\n              ></input>\n            </div>\n\n            <div className=\"shippingdiv\">\n              <label htmlFor=\"postalCode\">Postal Kod</label>\n              <input\n                type=\"text\"\n                id=\"postalCode\"\n                placeholder=\"Enter postal code\"\n                value={postalCode}\n                onChange={(e) => setPostalCode(e.target.value)}\n                required\n              ></input>\n            </div>\n       \n\n           <div className=\"shippingdiv\">\n            <label htmlFor=\"country\">Country</label>\n            <input\n              type=\"text\"\n              id=\"country\"\n              placeholder=\"Enter country\"\n              value={country}\n              onChange={(e) => setCountry(e.target.value)}\n              required\n            ></input>\n          </div> \n\n\n          \n\n          <div className=\"shippingdiv\">\n            <label htmlFor=\"address\" className=\"ml-[20px]\">Tam Address</label>\n            <textarea\n              type=\"text\"\n              id=\"address\"\n              placeholder=\"Enter address\"\n              value={address}\n              onChange={(e) => setAddress(e.target.value)}\n              required\n            ></textarea>\n          </div>\n\n          <div className=\"shippingdiv\">\n            <label />\n            <button className=\"w-[100%] greenbtn\" type=\"submit\">\n              Davam Et\n            </button>\n          </div>\n        </form>\n\n\n\n        <div className=\"closeshipping\" onClick={() => setOpenMenu(false)}>\n          <AiFillCloseCircle />\n        </div>\n      </div>\n    </div>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}