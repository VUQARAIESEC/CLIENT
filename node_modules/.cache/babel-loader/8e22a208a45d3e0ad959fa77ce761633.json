{"ast":null,"code":"import _toConsumableArray from\"C:\\\\Users\\\\PC\\\\Desktop\\\\vsfashion-main\\\\frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/toConsumableArray\";import _slicedToArray from\"C:\\\\Users\\\\PC\\\\Desktop\\\\vsfashion-main\\\\frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from\"react\";import{useDispatch,useSelector}from\"react-redux\";import{saveShippingAddress}from\"../actions/cartActions\";import CheckoutSteps from\"../components/CheckoutSteps\";import Select from\"react-select\";import{Link}from\"react-router-dom\";import data from'../data.json';import{addToCart,removeFromCart}from\"../actions/cartActions\";import MessageBox from\"../components/MessageBox\";import{AiFillDelete}from\"react-icons/ai\";import{AiFillCloseCircle}from\"react-icons/ai\";export default function CartScreen(props){var productId=props.match.params.id;var qty=props.location.search?Number(props.location.search.split(\"=\")[1]):1;var size=props.location.search?props.location.search.split(\"=\")[3]:1;var color=props.location.search?props.location.search.split(\"=\")[5]:1;var cart=useSelector(function(state){return state.cart;});var cartItems=cart.cartItems,error=cart.error;var dispatch=useDispatch();useEffect(function(){if(productId){dispatch(addToCart(productId,qty,size,color));}},[dispatch,productId,qty,size,color]);var removeFromCartHandler=function removeFromCartHandler(id){// delete action\ndispatch(removeFromCart(id));};var checkoutHandler=function checkoutHandler(){props.history.push(\"/signin?redirect=shipping\");};var userSignin=useSelector(function(state){return state.userSignin;});var userInfo=userSignin.userInfo;var shippingAddress=cart.shippingAddress;var _useState=useState(shippingAddress.lat),_useState2=_slicedToArray(_useState,2),lat=_useState2[0],setLat=_useState2[1];var _useState3=useState(shippingAddress.lng),_useState4=_slicedToArray(_useState3,2),lng=_useState4[0],setLng=_useState4[1];var userAddressMap=useSelector(function(state){return state.userAddressMap;});var addressMap=userAddressMap.address;if(!userInfo){props.history.push(\"/signin\");}var _useState5=useState(shippingAddress.fullName),_useState6=_slicedToArray(_useState5,2),fullName=_useState6[0],setFullName=_useState6[1];var _useState7=useState(shippingAddress.phoneNumber),_useState8=_slicedToArray(_useState7,2),phonenumber=_useState8[0],setPhoneNumber=_useState8[1];var _useState9=useState(shippingAddress.address),_useState10=_slicedToArray(_useState9,2),address=_useState10[0],setAddress=_useState10[1];var _useState11=useState(shippingAddress.city),_useState12=_slicedToArray(_useState11,2),city=_useState12[0],setCity=_useState12[1];var _useState13=useState(shippingAddress.city),_useState14=_slicedToArray(_useState13,2),region=_useState14[0],setRegion=_useState14[1];var _useState15=useState(shippingAddress.postalCode),_useState16=_slicedToArray(_useState15,2),postalCode=_useState16[0],setPostalCode=_useState16[1];var _useState17=useState(shippingAddress.country),_useState18=_slicedToArray(_useState17,2),country=_useState18[0],setCountry=_useState18[1];var submitHandler=function submitHandler(e){e.preventDefault();var moveOn=true;if(moveOn){dispatch(saveShippingAddress({fullName:fullName,address:address,city:city,region:region,postalCode:postalCode,country:country}));props.history.push(\"/placeorder\");}};console.log(cartItems.reduce(function(a,c){return a+c.qty;},0));// generate the link when both dropdowns are selected\n// useEffect(() => {\n//   if (country && lang) {\n//     setLink(`https://www.${country.url}/search?q=Clue+Mediator&gl=${country.country_code}&hl=${lang.code}`);\n//   }\n// }, [country, lang]);\nvar _useState19=useState(false),_useState20=_slicedToArray(_useState19,2),openmenu=_useState20[0],setOpenMenu=_useState20[1];return/*#__PURE__*/React.createElement(\"div\",{className:\"rowcart\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-2\"},/*#__PURE__*/React.createElement(\"h1\",{className:\"font-bold\"},\"S\\u0259b\\u0259tiniz\"),error&&/*#__PURE__*/React.createElement(MessageBox,{variant:\"danger\"},error),cartItems.length===0?/*#__PURE__*/React.createElement(MessageBox,null,\"S\\u0259b\\u0259tiniz bo\\u015Fdur. \",/*#__PURE__*/React.createElement(Link,{to:\"/\"},\"Al\\u0131\\u015F-veri\\u015F\\u0259 ba\\u015Fla\")):/*#__PURE__*/React.createElement(\"ul\",null,cartItems.map(function(item){return/*#__PURE__*/React.createElement(\"li\",{key:item.product},/*#__PURE__*/React.createElement(\"div\",{className:\"rowcarting\"},/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"img\",{src:item.image,alt:item.name,className:\"small\"})),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(Link,{to:\"/product/\".concat(item.product)},item.name)),/*#__PURE__*/React.createElement(\"div\",{className:\"\"},size),/*#__PURE__*/React.createElement(\"div\",{className:\"\"},color),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"select\",{className:\"p-[0px]\",value:item.qty,onChange:function onChange(e){return dispatch(addToCart(item.product,Number(e.target.value)));}},_toConsumableArray(Array(item.countInStock).keys()).map(function(x){return/*#__PURE__*/React.createElement(\"option\",{key:x+1,value:x+1},x+1);}))),/*#__PURE__*/React.createElement(\"div\",null,item.price,\"Azn\"),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"button\",{type:\"button\",onClick:function onClick(){return removeFromCartHandler(item.product);}},/*#__PURE__*/React.createElement(AiFillDelete,null)))));}))),/*#__PURE__*/React.createElement(\"div\",{className:\"ordersection\"},/*#__PURE__*/React.createElement(\"div\",{className:\"w-[100%] p-[10px]\"},/*#__PURE__*/React.createElement(\"ul\",null,/*#__PURE__*/React.createElement(\"li\",{className:\"font-bold text-[25px]\"},\"Sifari\\u015Fin \\xF6z\\u0259ti\"),/*#__PURE__*/React.createElement(\"li\",{className:\"flex  justify-between\"},/*#__PURE__*/React.createElement(\"div\",{className:\"font-bold\"},\"M\\u0259hsullar\"),/*#__PURE__*/React.createElement(\"div\",null,\"(\",cartItems.reduce(function(a,c){return a+c.qty;},0),\" m\\u0259hsul) :\",cartItems.reduce(function(a,c){return a+c.price*c.qty;},0),\" Azn\")),/*#__PURE__*/React.createElement(\"li\",{className:\"flex  justify-between\"},/*#__PURE__*/React.createElement(\"div\",{className:\"font-bold\"},\"Endirim\"),/*#__PURE__*/React.createElement(\"div\",null,\"0 Azn\")),/*#__PURE__*/React.createElement(\"hr\",null),/*#__PURE__*/React.createElement(\"li\",{className:\"flex  justify-between\"},/*#__PURE__*/React.createElement(\"div\",{className:\"font-bold\"},\"\\xDCmumi Qiym\\u0259t\"),/*#__PURE__*/React.createElement(\"div\",null,cartItems.reduce(function(a,c){return a+c.qty;},0)>5?cartItems.reduce(function(a,c){return a+c.price*c.qty;},0)+10:cartItems.reduce(function(a,c){return a+c.price*c.qty;},0),\" Azn Azn\")),/*#__PURE__*/React.createElement(\"li\",null,/*#__PURE__*/React.createElement(\"button\",{type:\"button\",onClick:function onClick(){return setOpenMenu(true);},className:\" w-[100%] bg-[#08AD76] text-[white] \",disabled:cartItems.length===0},\"Sifari\\u015Fi tamamla\"),/*#__PURE__*/React.createElement(\"h3\",{className:\"text-center\"},\"V\\u0259 ya\"),/*#__PURE__*/React.createElement(Link,{to:\"/\"},/*#__PURE__*/React.createElement(\"button\",{type:\"button\",className:\"w-[100%] bg-[white] border-solid border-2 border-[black]\",disabled:cartItems.length===0},\"Al\\u0131\\u015F-veri\\u015F\\u0259 davam et\")))))),/*#__PURE__*/React.createElement(\"div\",{className:openmenu?\"shippingadress open\":\"shippingadress\"},/*#__PURE__*/React.createElement(CheckoutSteps,{step1:true,step2:true}),/*#__PURE__*/React.createElement(\"form\",{className:\"formshipping\",onSubmit:submitHandler},/*#__PURE__*/React.createElement(\"div\",{className:\"text-center font-bold text-[20px]\"},/*#__PURE__*/React.createElement(\"h1\",{className:\"mt-[15px]\"},\"Shipping Address\")),/*#__PURE__*/React.createElement(\"div\",{className:\"shippingdiv\"},/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"fullName\"},\"Ad Soyad\"),/*#__PURE__*/React.createElement(\"input\",{type:\"text\",id:\"fullName\",placeholder:\"Enter full name\",value:fullName,onChange:function onChange(e){return setFullName(e.target.value);},required:true})),/*#__PURE__*/React.createElement(\"div\",{className:\"shippingdiv\"},/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"phonenumber\"},\"Telefon n\\xF6mr\\u0259si\"),/*#__PURE__*/React.createElement(\"input\",{type:\"tel\",id:\"phonenumber\",placeholder:\"Enter Phone Number\",value:phonenumber,onChange:function onChange(e){return setPhoneNumber(e.target.value);},required:true})),/*#__PURE__*/React.createElement(\"div\",{className:\"shippingdiv\"},/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"city\"},\"\\u015E\\u0259h\\u0259r\"),/*#__PURE__*/React.createElement(\"input\",{type:\"text\",id:\"city\",placeholder:\"Enter city\",value:city,onChange:function onChange(e){return setCity(e.target.value);},required:true})),/*#__PURE__*/React.createElement(\"div\",{className:\"shippingdiv\"},/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"region\"},\"Rayon\"),/*#__PURE__*/React.createElement(\"input\",{type:\"text\",id:\"region\",placeholder:\"Rayonu se\\xE7in\",value:region,onChange:function onChange(e){return setRegion(e.target.value);},required:true})),/*#__PURE__*/React.createElement(\"div\",{className:\"shippingdiv\"},/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"postalCode\"},\"Postal Kod\"),/*#__PURE__*/React.createElement(\"input\",{type:\"text\",id:\"postalCode\",placeholder:\"Enter postal code\",value:postalCode,onChange:function onChange(e){return setPostalCode(e.target.value);},required:true})),/*#__PURE__*/React.createElement(\"div\",{className:\"shippingdiv\"},/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"country\"},\"Country\"),/*#__PURE__*/React.createElement(\"input\",{type:\"text\",id:\"country\",placeholder:\"Enter country\",value:country,onChange:function onChange(e){return setCountry(e.target.value);},required:true})),/*#__PURE__*/React.createElement(\"div\",{className:\"shippingdiv\"},/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"address\",className:\"ml-[20px]\"},\"Tam Address\"),/*#__PURE__*/React.createElement(\"textarea\",{type:\"text\",id:\"address\",placeholder:\"Enter address\",value:address,onChange:function onChange(e){return setAddress(e.target.value);},required:true})),/*#__PURE__*/React.createElement(\"div\",{className:\"shippingdiv\"},/*#__PURE__*/React.createElement(\"label\",null),/*#__PURE__*/React.createElement(\"button\",{className:\"w-[100%] greenbtn\",type:\"submit\"},\"Davam Et\"))),/*#__PURE__*/React.createElement(\"div\",{className:\"closeshipping\",onClick:function onClick(){return setOpenMenu(false);}},/*#__PURE__*/React.createElement(AiFillCloseCircle,null))));}","map":{"version":3,"sources":["C:/Users/PC/Desktop/vsfashion-main/frontend/src/screens/CartScreen.js"],"names":["React","useState","useEffect","useDispatch","useSelector","saveShippingAddress","CheckoutSteps","Select","Link","data","addToCart","removeFromCart","MessageBox","AiFillDelete","AiFillCloseCircle","CartScreen","props","productId","match","params","id","qty","location","search","Number","split","size","color","cart","state","cartItems","error","dispatch","removeFromCartHandler","checkoutHandler","history","push","userSignin","userInfo","shippingAddress","lat","setLat","lng","setLng","userAddressMap","addressMap","address","fullName","setFullName","phoneNumber","phonenumber","setPhoneNumber","setAddress","city","setCity","region","setRegion","postalCode","setPostalCode","country","setCountry","submitHandler","e","preventDefault","moveOn","console","log","reduce","a","c","openmenu","setOpenMenu","length","map","item","product","image","name","target","value","Array","countInStock","keys","x","price"],"mappings":"gWAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,CAA0BC,SAA1B,KAA2C,OAA3C,CACA,OAASC,WAAT,CAAsBC,WAAtB,KAAyC,aAAzC,CACA,OAASC,mBAAT,KAAoC,wBAApC,CACA,MAAOC,CAAAA,aAAP,KAA0B,6BAA1B,CACA,MAAOC,CAAAA,MAAP,KAAmB,cAAnB,CACA,OAASC,IAAT,KAAqB,kBAArB,CACA,MAAOC,CAAAA,IAAP,KAAiB,cAAjB,CACA,OAASC,SAAT,CAAoBC,cAApB,KAA0C,wBAA1C,CACA,MAAOC,CAAAA,UAAP,KAAuB,0BAAvB,CACA,OAASC,YAAT,KAA6B,gBAA7B,CACA,OAASC,iBAAT,KAAkC,gBAAlC,CAGA,cAAe,SAASC,CAAAA,UAAT,CAAoBC,KAApB,CAA2B,CACxC,GAAMC,CAAAA,SAAS,CAAGD,KAAK,CAACE,KAAN,CAAYC,MAAZ,CAAmBC,EAArC,CACA,GAAMC,CAAAA,GAAG,CAAGL,KAAK,CAACM,QAAN,CAAeC,MAAf,CACRC,MAAM,CAACR,KAAK,CAACM,QAAN,CAAeC,MAAf,CAAsBE,KAAtB,CAA4B,GAA5B,EAAiC,CAAjC,CAAD,CADE,CAER,CAFJ,CAIA,GAAMC,CAAAA,IAAI,CAAGV,KAAK,CAACM,QAAN,CAAeC,MAAf,CAAwBP,KAAK,CAACM,QAAN,CAAeC,MAAf,CAAsBE,KAAtB,CAA4B,GAA5B,EAAiC,CAAjC,CAAxB,CAA8D,CAA3E,CACA,GAAME,CAAAA,KAAK,CAAGX,KAAK,CAACM,QAAN,CAAeC,MAAf,CAAwBP,KAAK,CAACM,QAAN,CAAeC,MAAf,CAAsBE,KAAtB,CAA4B,GAA5B,EAAiC,CAAjC,CAAxB,CAA8D,CAA5E,CAEA,GAAMG,CAAAA,IAAI,CAAGxB,WAAW,CAAC,SAACyB,KAAD,QAAWA,CAAAA,KAAK,CAACD,IAAjB,EAAD,CAAxB,CACA,GAAQE,CAAAA,SAAR,CAA6BF,IAA7B,CAAQE,SAAR,CAAmBC,KAAnB,CAA6BH,IAA7B,CAAmBG,KAAnB,CACA,GAAMC,CAAAA,QAAQ,CAAG7B,WAAW,EAA5B,CACAD,SAAS,CAAC,UAAM,CACd,GAAIe,SAAJ,CAAe,CACbe,QAAQ,CAACtB,SAAS,CAACO,SAAD,CAAYI,GAAZ,CAAiBK,IAAjB,CAAuBC,KAAvB,CAAV,CAAR,CACD,CACF,CAJQ,CAIN,CAACK,QAAD,CAAWf,SAAX,CAAsBI,GAAtB,CAA2BK,IAA3B,CAAiCC,KAAjC,CAJM,CAAT,CAMA,GAAMM,CAAAA,qBAAqB,CAAG,QAAxBA,CAAAA,qBAAwB,CAACb,EAAD,CAAQ,CACpC;AACAY,QAAQ,CAACrB,cAAc,CAACS,EAAD,CAAf,CAAR,CACD,CAHD,CAKA,GAAMc,CAAAA,eAAe,CAAG,QAAlBA,CAAAA,eAAkB,EAAM,CAC5BlB,KAAK,CAACmB,OAAN,CAAcC,IAAd,CAAmB,2BAAnB,EACD,CAFD,CAIA,GAAMC,CAAAA,UAAU,CAAGjC,WAAW,CAAC,SAACyB,KAAD,QAAWA,CAAAA,KAAK,CAACQ,UAAjB,EAAD,CAA9B,CAEA,GAAQC,CAAAA,QAAR,CAAqBD,UAArB,CAAQC,QAAR,CACA,GAAQC,CAAAA,eAAR,CAA4BX,IAA5B,CAAQW,eAAR,CACA,cAAsBtC,QAAQ,CAACsC,eAAe,CAACC,GAAjB,CAA9B,wCAAOA,GAAP,eAAYC,MAAZ,eACA,eAAsBxC,QAAQ,CAACsC,eAAe,CAACG,GAAjB,CAA9B,yCAAOA,GAAP,eAAYC,MAAZ,eACA,GAAMC,CAAAA,cAAc,CAAGxC,WAAW,CAAC,SAACyB,KAAD,QAAWA,CAAAA,KAAK,CAACe,cAAjB,EAAD,CAAlC,CACA,GAAiBC,CAAAA,UAAjB,CAAgCD,cAAhC,CAAQE,OAAR,CAEA,GAAI,CAACR,QAAL,CAAe,CACbtB,KAAK,CAACmB,OAAN,CAAcC,IAAd,CAAmB,SAAnB,EACD,CACD,eAAgCnC,QAAQ,CAACsC,eAAe,CAACQ,QAAjB,CAAxC,yCAAOA,QAAP,eAAiBC,WAAjB,eACA,eAAqC/C,QAAQ,CAACsC,eAAe,CAACU,WAAjB,CAA7C,yCAAOC,WAAP,eAAmBC,cAAnB,eACA,eAA8BlD,QAAQ,CAACsC,eAAe,CAACO,OAAjB,CAAtC,0CAAOA,OAAP,gBAAgBM,UAAhB,gBACA,gBAAwBnD,QAAQ,CAACsC,eAAe,CAACc,IAAjB,CAAhC,2CAAOA,IAAP,gBAAaC,OAAb,gBACA,gBAA4BrD,QAAQ,CAACsC,eAAe,CAACc,IAAjB,CAApC,2CAAOE,MAAP,gBAAeC,SAAf,gBACA,gBAAoCvD,QAAQ,CAACsC,eAAe,CAACkB,UAAjB,CAA5C,2CAAOA,UAAP,gBAAmBC,aAAnB,gBACA,gBAA8BzD,QAAQ,CAACsC,eAAe,CAACoB,OAAjB,CAAtC,2CAAOA,OAAP,gBAAgBC,UAAhB,gBAIA,GAAMC,CAAAA,aAAa,CAAG,QAAhBA,CAAAA,aAAgB,CAACC,CAAD,CAAO,CAC3BA,CAAC,CAACC,cAAF,GAEA,GAAIC,CAAAA,MAAM,CAAG,IAAb,CAEA,GAAIA,MAAJ,CAAY,CACVhC,QAAQ,CACN3B,mBAAmB,CAAC,CAClB0C,QAAQ,CAARA,QADkB,CAElBD,OAAO,CAAPA,OAFkB,CAGlBO,IAAI,CAAJA,IAHkB,CAIlBE,MAAM,CAANA,MAJkB,CAKlBE,UAAU,CAAVA,UALkB,CAMlBE,OAAO,CAAPA,OANkB,CAAD,CADb,CAAR,CAWA3C,KAAK,CAACmB,OAAN,CAAcC,IAAd,CAAmB,aAAnB,EACD,CACF,CAnBD,CAsBF6B,OAAO,CAACC,GAAR,CAAYpC,SAAS,CAACqC,MAAV,CAAiB,SAACC,CAAD,CAAIC,CAAJ,QAAUD,CAAAA,CAAC,CAAGC,CAAC,CAAChD,GAAhB,EAAjB,CAAsC,CAAtC,CAAZ,EAIE;AACA;AACA;AACA;AACA;AACA;AAGA,gBAAgCpB,QAAQ,CAAC,KAAD,CAAxC,2CAAOqE,QAAP,gBAAiBC,WAAjB,gBACA,mBACE,2BAAK,SAAS,CAAC,SAAf,eACE,2BAAK,SAAS,CAAC,OAAf,eACE,0BAAI,SAAS,CAAC,WAAd,wBADF,CAEGxC,KAAK,eAAI,oBAAC,UAAD,EAAY,OAAO,CAAC,QAApB,EAA8BA,KAA9B,CAFZ,CAGGD,SAAS,CAAC0C,MAAV,GAAqB,CAArB,cACC,oBAAC,UAAD,uDACoB,oBAAC,IAAD,EAAM,EAAE,CAAC,GAAT,+CADpB,CADD,cAKC,8BACG1C,SAAS,CAAC2C,GAAV,CAAc,SAACC,IAAD,qBACb,0BAAI,GAAG,CAAEA,IAAI,CAACC,OAAd,eACE,2BAAK,SAAS,CAAC,YAAf,eACE,4CACE,2BACE,GAAG,CAAED,IAAI,CAACE,KADZ,CAEE,GAAG,CAAEF,IAAI,CAACG,IAFZ,CAGE,SAAS,CAAC,OAHZ,EADF,CADF,cAQE,4CACE,oBAAC,IAAD,EAAM,EAAE,oBAAcH,IAAI,CAACC,OAAnB,CAAR,EAAuCD,IAAI,CAACG,IAA5C,CADF,CARF,cAYE,2BAAK,SAAS,CAAC,EAAf,EAAmBnD,IAAnB,CAZF,cAaE,2BAAK,SAAS,CAAC,EAAf,EAAmBC,KAAnB,CAbF,cAcE,4CACE,8BACE,SAAS,CAAC,SADZ,CAEE,KAAK,CAAE+C,IAAI,CAACrD,GAFd,CAGE,QAAQ,CAAE,kBAACyC,CAAD,QACR9B,CAAAA,QAAQ,CACNtB,SAAS,CAACgE,IAAI,CAACC,OAAN,CAAenD,MAAM,CAACsC,CAAC,CAACgB,MAAF,CAASC,KAAV,CAArB,CADH,CADA,EAHZ,EASG,mBAAIC,KAAK,CAACN,IAAI,CAACO,YAAN,CAAL,CAAyBC,IAAzB,EAAJ,EAAqCT,GAArC,CAAyC,SAACU,CAAD,qBACxC,8BAAQ,GAAG,CAAEA,CAAC,CAAG,CAAjB,CAAoB,KAAK,CAAEA,CAAC,CAAG,CAA/B,EACGA,CAAC,CAAG,CADP,CADwC,EAAzC,CATH,CADF,CAdF,cA+BE,+BAAMT,IAAI,CAACU,KAAX,OA/BF,cAgCE,4CACE,8BACE,IAAI,CAAC,QADP,CAEE,OAAO,CAAE,yBAAMnD,CAAAA,qBAAqB,CAACyC,IAAI,CAACC,OAAN,CAA3B,EAFX,eAIE,oBAAC,YAAD,MAJF,CADF,CAhCF,CADF,CADa,EAAd,CADH,CARJ,CADF,cA0DE,2BAAK,SAAS,CAAC,cAAf,eACE,2BAAK,SAAS,CAAC,mBAAf,eACE,2CACE,0BAAI,SAAS,CAAC,uBAAd,iCADF,cAEE,0BAAI,SAAS,CAAC,uBAAd,eACE,2BAAK,SAAS,CAAC,WAAf,mBADF,cAEE,mCACI7C,SAAS,CAACqC,MAAV,CAAiB,SAACC,CAAD,CAAIC,CAAJ,QAAUD,CAAAA,CAAC,CAAGC,CAAC,CAAChD,GAAhB,EAAjB,CAAsC,CAAtC,CADJ,mBAEGS,SAAS,CAACqC,MAAV,CAAiB,SAACC,CAAD,CAAIC,CAAJ,QAAUD,CAAAA,CAAC,CAAGC,CAAC,CAACe,KAAF,CAAUf,CAAC,CAAChD,GAA1B,EAAjB,CAAgD,CAAhD,CAFH,QAFF,CAFF,cASE,0BAAI,SAAS,CAAC,uBAAd,eACE,2BAAK,SAAS,CAAC,WAAf,YADF,cAEE,uCAFF,CATF,cAaE,8BAbF,cAcE,0BAAI,SAAS,CAAC,uBAAd,eACE,2BAAK,SAAS,CAAC,WAAf,yBADF,cAEE,+BACGS,SAAS,CAACqC,MAAV,CAAiB,SAACC,CAAD,CAAIC,CAAJ,QAAUD,CAAAA,CAAC,CAAGC,CAAC,CAAChD,GAAhB,EAAjB,CAAsC,CAAtC,EAA2C,CAA3C,CAA+CS,SAAS,CAACqC,MAAV,CAAiB,SAACC,CAAD,CAAIC,CAAJ,QAAUD,CAAAA,CAAC,CAAGC,CAAC,CAACe,KAAF,CAAUf,CAAC,CAAChD,GAA1B,EAAjB,CAAgD,CAAhD,EAAqD,EAApG,CAAyGS,SAAS,CAACqC,MAAV,CAAiB,SAACC,CAAD,CAAIC,CAAJ,QAAUD,CAAAA,CAAC,CAAGC,CAAC,CAACe,KAAF,CAAUf,CAAC,CAAChD,GAA1B,EAAjB,CAAgD,CAAhD,CAD5G,YAFF,CAdF,cAoBE,2CACE,8BACE,IAAI,CAAC,QADP,CAEE,OAAO,CAAE,yBAAMkD,CAAAA,WAAW,CAAC,IAAD,CAAjB,EAFX,CAGE,SAAS,CAAC,sCAHZ,CAIE,QAAQ,CAAEzC,SAAS,CAAC0C,MAAV,GAAqB,CAJjC,0BADF,cASE,0BAAI,SAAS,CAAC,aAAd,eATF,cAUE,oBAAC,IAAD,EAAM,EAAE,CAAC,GAAT,eACE,8BACE,IAAI,CAAC,QADP,CAEE,SAAS,CAAC,0DAFZ,CAGE,QAAQ,CAAE1C,SAAS,CAAC0C,MAAV,GAAqB,CAHjC,6CADF,CAVF,CApBF,CADF,CADF,CA1DF,cAwGE,2BAAK,SAAS,CAAEF,QAAQ,CAAG,qBAAH,CAA2B,gBAAnD,eACE,oBAAC,aAAD,EAAe,KAAK,KAApB,CAAqB,KAAK,KAA1B,EADF,cAIE,4BAAM,SAAS,CAAC,cAAhB,CAA+B,QAAQ,CAAET,aAAzC,eACE,2BAAK,SAAS,CAAC,mCAAf,eACE,0BAAI,SAAS,CAAC,WAAd,qBADF,CADF,cAOE,2BAAK,SAAS,CAAC,aAAf,eACE,6BAAO,OAAO,CAAC,UAAf,aADF,cAEE,6BACE,IAAI,CAAC,MADP,CAEE,EAAE,CAAC,UAFL,CAGE,WAAW,CAAC,iBAHd,CAIE,KAAK,CAAEd,QAJT,CAKE,QAAQ,CAAE,kBAACe,CAAD,QAAOd,CAAAA,WAAW,CAACc,CAAC,CAACgB,MAAF,CAASC,KAAV,CAAlB,EALZ,CAME,QAAQ,KANV,EAFF,CAPF,cAmBE,2BAAK,SAAS,CAAC,aAAf,eACE,6BAAO,OAAO,CAAC,aAAf,4BADF,cAEE,6BACE,IAAI,CAAC,KADP,CAEE,EAAE,CAAC,aAFL,CAGE,WAAW,CAAC,oBAHd,CAIE,KAAK,CAAE7B,WAJT,CAKE,QAAQ,CAAE,kBAACY,CAAD,QAAOX,CAAAA,cAAc,CAACW,CAAC,CAACgB,MAAF,CAASC,KAAV,CAArB,EALZ,CAME,QAAQ,KANV,EAFF,CAnBF,cA+BE,2BAAK,SAAS,CAAC,aAAf,eACI,6BAAO,OAAO,CAAC,MAAf,yBADJ,cAEI,6BACE,IAAI,CAAC,MADP,CAEE,EAAE,CAAC,MAFL,CAGE,WAAW,CAAC,YAHd,CAIE,KAAK,CAAE1B,IAJT,CAKE,QAAQ,CAAE,kBAACS,CAAD,QAAOR,CAAAA,OAAO,CAACQ,CAAC,CAACgB,MAAF,CAASC,KAAV,CAAd,EALZ,CAME,QAAQ,KANV,EAFJ,CA/BF,cA4CI,2BAAK,SAAS,CAAC,aAAf,eACE,6BAAO,OAAO,CAAC,QAAf,UADF,cAEE,6BACE,IAAI,CAAC,MADP,CAEE,EAAE,CAAC,QAFL,CAGE,WAAW,CAAC,iBAHd,CAIE,KAAK,CAAExB,MAJT,CAKE,QAAQ,CAAE,kBAACO,CAAD,QAAON,CAAAA,SAAS,CAACM,CAAC,CAACgB,MAAF,CAASC,KAAV,CAAhB,EALZ,CAME,QAAQ,KANV,EAFF,CA5CJ,cAwDI,2BAAK,SAAS,CAAC,aAAf,eACE,6BAAO,OAAO,CAAC,YAAf,eADF,cAEE,6BACE,IAAI,CAAC,MADP,CAEE,EAAE,CAAC,YAFL,CAGE,WAAW,CAAC,mBAHd,CAIE,KAAK,CAAEtB,UAJT,CAKE,QAAQ,CAAE,kBAACK,CAAD,QAAOJ,CAAAA,aAAa,CAACI,CAAC,CAACgB,MAAF,CAASC,KAAV,CAApB,EALZ,CAME,QAAQ,KANV,EAFF,CAxDJ,cAqEG,2BAAK,SAAS,CAAC,aAAf,eACC,6BAAO,OAAO,CAAC,SAAf,YADD,cAEC,6BACE,IAAI,CAAC,MADP,CAEE,EAAE,CAAC,SAFL,CAGE,WAAW,CAAC,eAHd,CAIE,KAAK,CAAEpB,OAJT,CAKE,QAAQ,CAAE,kBAACG,CAAD,QAAOF,CAAAA,UAAU,CAACE,CAAC,CAACgB,MAAF,CAASC,KAAV,CAAjB,EALZ,CAME,QAAQ,KANV,EAFD,CArEH,cAoFE,2BAAK,SAAS,CAAC,aAAf,eACE,6BAAO,OAAO,CAAC,SAAf,CAAyB,SAAS,CAAC,WAAnC,gBADF,cAEE,gCACE,IAAI,CAAC,MADP,CAEE,EAAE,CAAC,SAFL,CAGE,WAAW,CAAC,eAHd,CAIE,KAAK,CAAEjC,OAJT,CAKE,QAAQ,CAAE,kBAACgB,CAAD,QAAOV,CAAAA,UAAU,CAACU,CAAC,CAACgB,MAAF,CAASC,KAAV,CAAjB,EALZ,CAME,QAAQ,KANV,EAFF,CApFF,cAgGE,2BAAK,SAAS,CAAC,aAAf,eACE,iCADF,cAEE,8BAAQ,SAAS,CAAC,mBAAlB,CAAsC,IAAI,CAAC,QAA3C,aAFF,CAhGF,CAJF,cA8GE,2BAAK,SAAS,CAAC,eAAf,CAA+B,OAAO,CAAE,yBAAMR,CAAAA,WAAW,CAAC,KAAD,CAAjB,EAAxC,eACE,oBAAC,iBAAD,MADF,CA9GF,CAxGF,CADF,CA6ND","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { saveShippingAddress } from \"../actions/cartActions\";\nimport CheckoutSteps from \"../components/CheckoutSteps\";\nimport Select from \"react-select\";\nimport { Link } from \"react-router-dom\";\nimport data from '../data.json';\nimport { addToCart, removeFromCart } from \"../actions/cartActions\";\nimport MessageBox from \"../components/MessageBox\";\nimport { AiFillDelete } from \"react-icons/ai\";\nimport { AiFillCloseCircle } from \"react-icons/ai\";\n\n\nexport default function CartScreen(props) {\n  const productId = props.match.params.id;\n  const qty = props.location.search\n    ? Number(props.location.search.split(\"=\")[1])\n    : 1;\n\n  const size = props.location.search ? props.location.search.split(\"=\")[3] : 1;\n  const color = props.location.search ? props.location.search.split(\"=\")[5] : 1;\n\n  const cart = useSelector((state) => state.cart);\n  const { cartItems, error } = cart;\n  const dispatch = useDispatch();\n  useEffect(() => {\n    if (productId) {\n      dispatch(addToCart(productId, qty, size, color));\n    }\n  }, [dispatch, productId, qty, size, color]);\n\n  const removeFromCartHandler = (id) => {\n    // delete action\n    dispatch(removeFromCart(id));\n  };\n\n  const checkoutHandler = () => {\n    props.history.push(\"/signin?redirect=shipping\");\n  };\n\n  const userSignin = useSelector((state) => state.userSignin);\n\n  const { userInfo } = userSignin;\n  const { shippingAddress } = cart;\n  const [lat, setLat] = useState(shippingAddress.lat);\n  const [lng, setLng] = useState(shippingAddress.lng);\n  const userAddressMap = useSelector((state) => state.userAddressMap);\n  const { address: addressMap } = userAddressMap;\n\n  if (!userInfo) {\n    props.history.push(\"/signin\");\n  }\n  const [fullName, setFullName] = useState(shippingAddress.fullName);\n  const [phonenumber,setPhoneNumber] = useState(shippingAddress.phoneNumber);\n  const [address, setAddress] = useState(shippingAddress.address);\n  const [city, setCity] = useState(shippingAddress.city);\n  const [region, setRegion] = useState(shippingAddress.city);\n  const [postalCode, setPostalCode] = useState(shippingAddress.postalCode);\n  const [country, setCountry] = useState(shippingAddress.country);\n  \n\n\n  const submitHandler = (e) => {\n    e.preventDefault();\n \n    let moveOn = true;\n\n    if (moveOn) {\n      dispatch(\n        saveShippingAddress({\n          fullName,\n          address,\n          city,\n          region,\n          postalCode,\n          country,\n          \n        })\n      );\n      props.history.push(\"/placeorder\");\n    }\n  };\n\n\nconsole.log(cartItems.reduce((a, c) => a + c.qty, 0));\n\n  \n\n  // generate the link when both dropdowns are selected\n  // useEffect(() => {\n  //   if (country && lang) {\n  //     setLink(`https://www.${country.url}/search?q=Clue+Mediator&gl=${country.country_code}&hl=${lang.code}`);\n  //   }\n  // }, [country, lang]);\n\n\n  const [openmenu, setOpenMenu] = useState(false);\n  return (\n    <div className=\"rowcart\">\n      <div className=\"col-2\">\n        <h1 className=\"font-bold\">Səbətiniz</h1>\n        {error && <MessageBox variant=\"danger\">{error}</MessageBox>}\n        {cartItems.length === 0 ? (\n          <MessageBox>\n            Səbətiniz boşdur. <Link to=\"/\">Alış-verişə başla</Link>\n          </MessageBox>\n        ) : (\n          <ul>\n            {cartItems.map((item) => (\n              <li key={item.product}>\n                <div className=\"rowcarting\">\n                  <div>\n                    <img\n                      src={item.image}\n                      alt={item.name}\n                      className=\"small\"\n                    ></img>\n                  </div>\n                  <div>\n                    <Link to={`/product/${item.product}`}>{item.name}</Link>\n                  </div>\n\n                  <div className=\"\">{size}</div>\n                  <div className=\"\">{color}</div>\n                  <div>\n                    <select\n                      className=\"p-[0px]\"\n                      value={item.qty}\n                      onChange={(e) =>\n                        dispatch(\n                          addToCart(item.product, Number(e.target.value))\n                        )\n                      }\n                    >\n                      {[...Array(item.countInStock).keys()].map((x) => (\n                        <option key={x + 1} value={x + 1}>\n                          {x + 1}\n                        </option>\n                      ))}\n                    </select>\n                  </div>\n                  <div>{item.price}Azn</div>\n                  <div>\n                    <button\n                      type=\"button\"\n                      onClick={() => removeFromCartHandler(item.product)}\n                    >\n                      <AiFillDelete />\n                    </button>\n                  </div>\n                </div>\n              </li>\n            ))}\n          </ul>\n        )}\n      </div>\n      <div className=\"ordersection\">\n        <div className=\"w-[100%] p-[10px]\">\n          <ul>\n            <li className=\"font-bold text-[25px]\">Sifarişin özəti</li>\n            <li className=\"flex  justify-between\">\n              <div className=\"font-bold\">Məhsullar</div>\n              <div>\n                ({cartItems.reduce((a, c) => a + c.qty, 0)} məhsul) : \n                {cartItems.reduce((a, c) => a + c.price * c.qty, 0)} Azn\n              </div>\n            </li>\n            <li className=\"flex  justify-between\">\n              <div className=\"font-bold\">Endirim</div>\n              <div>0 Azn</div>\n            </li>\n            <hr />\n            <li className=\"flex  justify-between\">\n              <div className=\"font-bold\">Ümumi Qiymət</div>\n              <div>\n                {cartItems.reduce((a, c) => a + c.qty, 0) > 5 ? cartItems.reduce((a, c) => a + c.price * c.qty, 0) + 10 : cartItems.reduce((a, c) => a + c.price * c.qty, 0)} Azn\n                 Azn</div>\n            </li>\n            <li>\n              <button\n                type=\"button\"\n                onClick={() => setOpenMenu(true)}\n                className=\" w-[100%] bg-[#08AD76] text-[white] \"\n                disabled={cartItems.length === 0}\n              >\n                Sifarişi tamamla\n              </button>\n              <h3 className=\"text-center\">Və ya</h3>\n              <Link to=\"/\">\n                <button\n                  type=\"button\"\n                  className=\"w-[100%] bg-[white] border-solid border-2 border-[black]\"\n                  disabled={cartItems.length === 0}\n                >\n                 Alış-verişə davam et\n                </button>\n              </Link>\n            </li>\n          </ul>\n        </div>\n      </div>\n\n      <div className={openmenu ? \"shippingadress open\" : \"shippingadress\"}>\n        <CheckoutSteps step1 step2></CheckoutSteps>\n\n\n        <form className=\"formshipping\" onSubmit={submitHandler}>\n          <div className=\"text-center font-bold text-[20px]\">\n            <h1 className=\"mt-[15px]\">Shipping Address</h1>\n          </div>\n\n     \n\n          <div className=\"shippingdiv\">\n            <label htmlFor=\"fullName\">Ad Soyad</label>\n            <input\n              type=\"text\"\n              id=\"fullName\"\n              placeholder=\"Enter full name\"\n              value={fullName}\n              onChange={(e) => setFullName(e.target.value)}\n              required\n            ></input>\n          </div>\n\n          <div className=\"shippingdiv\">\n            <label htmlFor=\"phonenumber\">Telefon nömrəsi</label>\n            <input\n              type=\"tel\"\n              id=\"phonenumber\"\n              placeholder=\"Enter Phone Number\"\n              value={phonenumber}\n              onChange={(e) => setPhoneNumber(e.target.value)}\n              required\n            ></input>\n          </div>  \n\n          <div className=\"shippingdiv\">\n              <label htmlFor=\"city\">Şəhər</label>\n              <input\n                type=\"text\"\n                id=\"city\"\n                placeholder=\"Enter city\"\n                value={city}\n                onChange={(e) => setCity(e.target.value)}\n                required\n              ></input>\n            </div>\n\n\n            <div className=\"shippingdiv\">\n              <label htmlFor=\"region\">Rayon</label>\n              <input\n                type=\"text\"\n                id=\"region\"\n                placeholder=\"Rayonu seçin\"\n                value={region}\n                onChange={(e) => setRegion(e.target.value)}\n                required\n              ></input>\n            </div>\n\n            <div className=\"shippingdiv\">\n              <label htmlFor=\"postalCode\">Postal Kod</label>\n              <input\n                type=\"text\"\n                id=\"postalCode\"\n                placeholder=\"Enter postal code\"\n                value={postalCode}\n                onChange={(e) => setPostalCode(e.target.value)}\n                required\n              ></input>\n            </div>\n       \n\n           <div className=\"shippingdiv\">\n            <label htmlFor=\"country\">Country</label>\n            <input\n              type=\"text\"\n              id=\"country\"\n              placeholder=\"Enter country\"\n              value={country}\n              onChange={(e) => setCountry(e.target.value)}\n              required\n            ></input>\n          </div> \n\n\n          \n\n          <div className=\"shippingdiv\">\n            <label htmlFor=\"address\" className=\"ml-[20px]\">Tam Address</label>\n            <textarea\n              type=\"text\"\n              id=\"address\"\n              placeholder=\"Enter address\"\n              value={address}\n              onChange={(e) => setAddress(e.target.value)}\n              required\n            ></textarea>\n          </div>\n\n          <div className=\"shippingdiv\">\n            <label />\n            <button className=\"w-[100%] greenbtn\" type=\"submit\">\n              Davam Et\n            </button>\n          </div>\n        </form>\n\n\n\n        <div className=\"closeshipping\" onClick={() => setOpenMenu(false)}>\n          <AiFillCloseCircle />\n        </div>\n      </div>\n    </div>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}